name: Hourly Update
on:
  schedule:
    - cron: '0 * * * *' # æ¯å°æ—¶å‡†ç‚¹è¿è¡Œ
  workflow_dispatch:

jobs:
  update-content:
    runs-on: ubuntu-latest
    steps:
    - name: Checkout repo
      uses: actions/checkout@v4

    - name: Set hour values
      id: set-time
      run: |
        CURRENT_HOUR=$(date -u +%-H)
        HOUR_TEXTS=(
          "åˆå¤œç²¾çµ ðŸ¦‰" "æ˜Ÿå¤œå®ˆæœ› ðŸŒŒ" "å‡Œæ™¨ç§˜å¢ƒ ðŸŒ " "ç ´æ™“ä¹‹å‰ ðŸŒ„" 
          "æ™¨æ›¦å¾®éœ² ðŸŒ¤" "æ—©å®‰ä¸–ç•Œ ðŸŒ…" "æ´»åŠ›æ¸…æ™¨ ðŸƒâ™€ï¸" "å·¥ä½œå¯åŠ¨ ðŸ’¼"
          "é«˜æ•ˆä¸Šåˆ ðŸ“ˆ" "åˆå‰å†²åˆº ðŸš€" "æ­£åˆè‰³é˜³ ðŸŒž" "åˆé—´å°æ†© ðŸ˜´"
          "åˆåŽæ—¶å…‰ ðŸµ" "çµæ„Ÿæ—¶é—´ ðŸ’¡" "ä¸‹åˆèŒ¶æ­‡ ðŸ°" "æ—¥è½ä¹‹å‰ ðŸŒ‡"
          "é»„æ˜æ—¶åˆ» ðŸŒ†" "æ™šéœžæ¼«å¤© ðŸŒˆ" "å¤œå¹•é™ä¸´ ðŸŒƒ" "æ™šé¤æ—¶é—´ ðŸ²"
          "å¤œé—´æ¨¡å¼ ðŸŒ™" "åˆ›æ„ä¹‹å¤œ ðŸŽ¨" "æ·±å¤œæ€è€ƒ ðŸ¤”" "ç¾Žæ¢¦æ—¶åˆ† ðŸ›Œ"
        )
        echo "HOUR=$CURRENT_HOUR" >> $GITHUB_ENV
        echo "TEXT=${HOUR_TEXTS[$CURRENT_HOUR]}" >> $GITHUB_ENV

    - name: Replace placeholders
      run: |
        sed -i "s/{{HOUR}}/$HOUR/g; s/{{TEXT}}/$TEXT/g" README.md

    - name: Commit changes
      uses: stefanzweifel/git-auto-commit-action@v5
      with:
        commit_message: 'Auto update hourly content [skip ci]'